<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
      <title>LinkedDataHub - Change layout</title>
      <meta name="description" content="How to customize the layout of an application and the UI of the resources"/>
      <link rel="up" href="../index.html"/>
      <link href="https://atomgraph.github.io/LinkedDataHub/linkeddatahub/docs/css/bootstrap.css" rel="stylesheet" type="text/css"/>
      <link href="https://atomgraph.github.io/LinkedDataHub/linkeddatahub/docs/css/bootstrap-responsive.css" rel="stylesheet" type="text/css"/>
      <style type="text/css">
				body { padding-top: 60px; }
				object { width: 100%; min-height: 640px; }
			</style><script type="text/javascript" src="https://atomgraph.github.io/LinkedDataHub/linkeddatahub/docs/js/jquery.min.js"></script><script type="text/javascript">
				$(document).ready(function()
				{

					$("ul.nav-tabs a").on("click", function()
					{
						$(this).closest("ul").children().toggleClass("active", false); // deactivate other tabs
						$(this).closest("li").toggleClass("active", true); // activate this tab
						$(this).closest("ul").next().children().toggleClass("active", false); // deactivate other tab panes
						$(this).closest("ul").next().children().eq($(this).closest("li").index()).toggleClass("active", true); // activate this tab pane
					});

				});
			</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-38402002-6"></script><script>
				
					window.dataLayer = window.dataLayer || [];
					function gtag(){dataLayer.push(arguments);}
					gtag('js', new Date());

					gtag('config', 'UA-38402002-6');
				
			</script></head>
   <body>
      <div class="navbar navbar-fixed-top">
         <div class="navbar-inner">
            <div class="container-fluid"><a class="brand" href="https://atomgraph.github.io/LinkedDataHub/">LinkedDataHub</a><div class="nav-collapse collapse">
                  <ul class="nav">
                     <li class="active"><a href="https://atomgraph.github.io/LinkedDataHub/linkeddatahub/docs/">Documentation</a></li>
                     <li><a href="https://github.com/AtomGraph/LinkedDataHub" target="_blank">Code</a></li>
                  </ul>
               </div>
            </div>
         </div>
      </div>
      <div class="container-fluid">
         <div class="row-fluid">
            <nav class="span2">
               <ul class="nav nav-list">
                  <li><a href="../../about/index.html" title="A UI-based cloud platform for data integration, management, and application building">About LinkedDataHub</a></li>
                  <li><a href="../../get-started/index.html" title="All the basics of LinkedDataHub. From installation to extending the model and user interface.">Get started</a><ul class="nav nav-list">
                        <li><a href="../../get-started/get-an-account/index.html" title="How to get access">Get an account</a></li>
                        <li><a href="../../get-started/setup/index.html" title="Setup LinkedDataHub on your local machine or access it in the cloud">Setup</a></li>
                     </ul>
                  </li>
                  <li><a href="../../linkeddatahub-cloud/index.html" title="LinkedDataHub Cloud is a managed service for LinkedDataHub applications">LinkedDataHub Cloud</a></li>
                  <li><a href="../../reference/index.html" title="A list of LinkedDataHub's features and their functions, split into general and administration parts">Reference</a><ul class="nav nav-list">
                        <li><a href="../../reference/administration/index.html" title="Access control and domain model management">Administration</a><ul class="nav nav-list">
                              <li><a href="../../reference/administration/acl/index.html" title="Agents, groups, and authorizations">Access control</a></li>
                              <li><a href="../../reference/administration/model/index.html" title="Ontology classes, constraints, properties etc.">Model</a><ul class="nav nav-list">
                                    <li><a href="../../reference/administration/model/built-ins/index.html" title="Classes, constraints, properties available to all LinkedDataHub apps">Built-in model terms</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><a href="../../reference/command-line-interface/index.html" title="CLI scripts can be used perform all actions available in the UI">Command line interface</a></li>
                        <li><a href="../../reference/dataset-structure/index.html" title="The default RDF dataset structure used by LinkedDataHub">Dataset structure</a></li>
                        <li><a href="../../reference/dataspace/index.html" title="LinkedDataHub dataspaces, applications, and services">Dataspace</a></li>
                        <li><a href="../../reference/documents/index.html" title="Document hierarchy and the basic data management actions">Document management</a></li>
                        <li><a href="../../reference/http-api/index.html" title="Learn how to access and manage RDF data over generic HTTP API">HTTP API</a></li>
                        <li><a href="../../reference/imports/index.html" title="Types of data imports supported by LinkedDataHub">Imports</a><ul class="nav nav-list">
                              <li><a href="../../reference/imports/csv/index.html" title="CSV imports and mapping to RDF using SPARQL CONSTRUCT">CSV imports</a></li>
                              <li><a href="../../reference/imports/rdf/index.html" title="RDF imports and transforming RDF using SPARQL CONSTRUCT">RDF imports</a></li>
                           </ul>
                        </li>
                        <li><a href="../../reference/stylesheets/index.html" title="Built-in XSLT and CSS stylesheets">Stylesheets</a></li>
                        <li><a href="../../reference/user-interface/index.html" title="A walk through the main features of application user interface">User interface</a></li>
                     </ul>
                  </li>
                  <li><a href="../index.html" title="Step-by-step tutorials for everyday tasks with LinkedDataHub">User guide</a><ul class="nav nav-list">
                        <li><a href="../browse-data/index.html" title="Use LinkedDataHub's built-in Linked Data browser to explore remote datasources">Browse data</a></li>
                        <li class="active"><a href="" title="How to customize the layout of an application and the UI of the resources">Change layout</a></li>
                        <li><a href="../change-model/index.html" title="Change the model: create constructors, classes, and constraints">Change the model</a></li>
                        <li><a href="../change-system-base-uri/index.html" title="How to change host, port, or the path LinkedDataHub service runs on">Change system base URI</a></li>
                        <li><a href="../create-document/index.html" title="Learn how to create container and item documents">Create document</a></li>
                        <li><a href="../import-data/index.html" title="How to import data into LinkedDataHub">Import data</a><ul class="nav nav-list">
                              <li><a href="../import-data/import-csv-data/index.html" title="Step by step guide to converting CSV data to RDF and importing into end-user application">Import CSV data</a></li>
                              <li><a href="../import-data/import-rdf-data/index.html" title="Step by step guide to importing RDF data">Import RDF data</a></li>
                           </ul>
                        </li>
                        <li><a href="../manage-dataspaces/index.html" title="Create or change a dataspace, configure SPARQL services and XSLT stylesheets">Manage dataspaces</a></li>
                        <li><a href="../query-data/index.html" title="Learn how to query application data with SPARQL and store queries">Query data</a></li>
                        <li><a href="../search-data/index.html" title="Search for resources using text keywords">Search data</a></li>
                        <li><a href="../upload-file/index.html" title="Learn how to upload files to LinkedDataHub">Upload file</a></li>
                     </ul>
                  </li>
               </ul>
            </nav>
            <main class="span7">
               <header>
                  <h1>Change layout</h1>
                  <p class="lead">How to customize the layout of an application and the UI of the resources</p>
               </header>
               <nav></nav>
               <div>
                  
                  
                  <p>LinkedDataHub's user interface is simply a rendering of the underlying Linked Data
                     resource descriptions, which are exposed via the <a href="../../reference/http-api/" target="_blank">HTTP API</a>.</p>
                  
                  <p>LinkedDataHub provides <a href="../../reference/stylesheets/" target="_blank">XSLT stylesheets</a> that render a default UI layout. When building an application you might want to render
                     a custom
                     layout however. The recommended way of doing that is to create a new stylesheet which
                     imports the system stylesheet and only override specific templates, while reusing
                     the rest of the layout.</p>
                  
                  <div>
                     
                     <h2 id="create-stylesheet">Create a stylesheet</h2>
                     
                     <p>First we need to create a new XSLT 3.0 stylesheet and use <code>&lt;xsl:import&gt;</code> to import the system <samp>layout.xsl</samp>.</p>
                     
                     </div>
                  
                  <div>
                     
                     <h2 id="configure-dataspace">Configure the dataspace</h2>
                     
                     <div class="tabbable">
                        
                        <ul class="nav nav-tabs">
                           
                           <li class="active"><a>LinkedDataHub</a></li>
                           </ul>
                        
                        <div class="tab-content">
                           
                           <div class="tab-pane active">
                              
                              <div>
                                 
                                 <p>First, either <a href="../upload-file/" target="_blank">upload the XSLT file</a> or mount it using Docker and <samp>docker-compose.override.yml:</samp>:</p>
                                 
                                 <pre>version: "2.3"
services:
  linkeddatahub:
    volumes:
      - ../LinkedDataHub-Apps/demo/skos/files/skos.xsl:/usr/local/tomcat/webapps/ROOT/static/com/atomgraph/linkeddatahub/demo/skos/xsl/index.xsl:ro # won't work on LinkedDataHub Cloud</pre>
                                 
                                 <p>Then change the value of <code>ac:stylesheet</code> on the dataspace with base URI <code>https://localhost:4443/</code> to the URI of the stylesheet:</p>
                                 
                                 <pre>_:root_end_user_app a lapp:EndUserApplication ;
    ...
    ac:stylesheet &lt;https://localhost:4443/static/com/atomgraph/linkeddatahub/demo/skos/xsl/index.xsl&gt; ;
    ...</pre>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  
                  <div>
                     
                     <h2 id="default-layout">Default layout</h2>
                     
                     <p>In the examples below we assume that the graph contains a SKOS taxonomy with concept
                        instances, which can also have broader/narrower concepts.</p>
                     
                     <p>At this point, the default layout of the current document, its topic concept, and
                        narrower/broader concepts looks like this:</p>
                     
                     <div class="thumbnail">
                        <img alt="Default layout" src="../../files/images/change-layout-default.png"/>
                        </div>
                     </div>
                  
                  <div>
                     
                     <h2 id="augment-output">Augment output</h2>
                     
                     <p>Keep the default output using <code>&lt;xsl:apply-imports&gt;</code> or <code>&lt;xsl:next-match&gt;</code> and add new output before/after it:</p>
                     
                     <pre>&lt;xsl:key name="resources-by-broader" match="*[@rdf:about] | *[@rdf:nodeID]" use="skos:broader/@rdf:resource"/&gt;
        
&lt;xsl:template match="*[foaf:isPrimaryTopicOf/@rdf:resource = $ac:uri][key('resources-by-broader', @rdf:about)]  | *[foaf:isPrimaryTopicOf/@rdf:resource = $ac:uri][key('resources', skos:narrower/@rdf:resource)]" mode="bs2:Block" priority="1"&gt;
    &lt;xsl:next-match/&gt;

    &lt;h3&gt;Narrower concepts&lt;/h3&gt;
    &lt;ul&gt;
        &lt;xsl:apply-templates select="key('resources-by-broader', @rdf:about) | key('resources', skos:narrower/@rdf:resource)" mode="bs2:List"&gt;
            &lt;xsl:sort select="ac:label(.)"/&gt;
        &lt;/xsl:apply-templates&gt;
    &lt;/ul&gt;
&lt;/xsl:template&gt;</pre>
                     
                     <p>The match pattern will match the resource descriptions that:</p>
                     
                     <ul>
                        
                        <li>are the primary topics of the requested document (i.e. its concept) <em>and</em> is a broader concept of some other resources in the RDF graph</li>
                        
                        <li>are the primary topics of the requested document (i.e. its concept) <em>and</em> has narrower concept(s) in the RDF graph</li>
                        </ul>
                     
                     <p>We can render broader concepts by making a copy of the key and the template above
                        and replacing all occurences of <code>skos:narrower</code> with <code>skos:broader</code> and vice versa.</p>
                     
                     <p>With the overriding template, the layout looks like this:</p>
                     
                     <div class="thumbnail">
                        <img alt="Augmented output" src="../../files/images/change-layout-augment.png"/>
                        </div>
                     </div>
                  
                  <div>
                     
                     <h2 id="override-output">Override output</h2>
                     
                     <p>To completely change the layout without keeping the default one, use the same logic
                        as for <a href="#augment-output">augmenting</a> it, but do not call <code>&lt;xsl:apply-imports&gt;</code>/<code>&lt;xsl:next-match&gt;</code>.</p>
                     </div>
                  
                  <div>
                     
                     <h2 id="suppress-output">Suppress output</h2>
                     
                     <p>In the above example, we have rendered <code>skos:narrower</code> properties in our own special way. Which means that the default output of the same
                        properties from <code>bs2:PropertyList</code> is no longer desired.</p>
                     
                     <p>You can specify an empty template at any level (graph/property/resource) to disable
                        output of that layout mode. For example, this will suppress the default rendering
                        of concepts which are
                        now shown in the customized broader/narrower list:</p>
                     
                     <pre>&lt;xsl:template match="*[key('resources', skos:narrower/@rdf:resource)/foaf:isPrimaryTopicOf/@rdf:resource = $ac:uri] | *[key('resources', skos:broader/@rdf:resource)/foaf:isPrimaryTopicOf/@rdf:resource = $ac:uri] | *[@rdf:about = key('resources', key('resources', $ac:uri)/foaf:primaryTopic/@rdf:resource)/skos:narrower/@rdf:resource] | *[@rdf:about = key('resources', key('resources', $ac:uri)/foaf:primaryTopic/@rdf:resource)/skos:broader/@rdf:resource]" mode="bs2:Block"/&gt;</pre>
                     
                     <p>The match pattern will match the resource descriptions that:</p>
                     
                     <ul>
                        
                        <li>have narrower concept(s) in the RDF graph that are the primary topic of the current
                           document</li>
                        
                        <li>have broader concept(s) in the RDF graph that are the primary topic of the current
                           document</li>
                        
                        <li>are narrower concept of the primary topic of the current document</li>
                        
                        <li>are broader concept of the primary topic of the current document</li>
                        </ul>
                     
                     <pre>&lt;xsl:template match="*[foaf:isPrimaryTopicOf/@rdf:resource = $ac:uri][key('resources', skos:broader/@rdf:resource)]/skos:broader | *[foaf:isPrimaryTopicOf/@rdf:resource = $ac:uri][key('resources', skos:narrower/@rdf:resource)]/skos:narrower" mode="bs2:PropertyList"/&gt;</pre>
                     
                     <p>The match pattern will match the resource properties that:</p>
                     
                     <ul>
                        
                        <li>are <code>skos:broader</code> properties of a resource that is the primary topic of the current document <em>and</em> has broader concepts in the RDF graph</li>
                        
                        <li>are <code>skos:narrower</code> properties of a resource that is the primary topic of the current document <em>and</em> has narrower concepts in the RDF graph</li>
                        </ul>
                     
                     <p>With the supressing templates, the layout now looks like this:</p>
                     
                     <div class="thumbnail">
                        <img alt="Suppressed output" src="../../files/images/change-layout-suppress.png"/>
                        </div>
                     </div>
                  </div>
            </main>
         </div>
      </div>
   </body>
</html>